<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Airhockey</title>
    <link rel="stylesheet" type="text/css" href="../Style/styleNav.css">
    <link rel="stylesheet" type="text/css" href="../Style/styleSpiel.css">
    <!--<script src="../JavaScript/navbar.js" type="text/javascript"></script>-->
</head>
<body onload="startgame()">
    <div class="navbar">
        <a href="../index.html">Start</a>
        <a class="active" href="spiel.html">Spiel</a>
        <a href="spielanleitung.html">Spielanleitung</a>
        <a href="highscore.html">Highscore</a>
        <a href="impressum.html">Impressum</a>
    </div>
    <h1>Airhockey Beastmode</h1>
    <script>
        function startgame(){
            myGameArea.start();
            balken1 = new komponente(20, 100, "green", 360, 480);
        }
        var myGameArea = {
            canvas : document.createElement("canvas"),
            start: function()
            {
                this.canvas.width = 800; //Canvas soll 640x480 px groß sein egal?
                this.canvas.height = 500;
                this.canvas.style.cursor = "none"; //Cursor auf Canvas verstecken
                this.context = this.canvas.getContext("2d"); //2d hat Methoden zum schreiben auf canvas
                document.body.insertBefore(this.canvas, null); //Problem: null sollte eig. document.body.childNodes[0] sein lädt aber dann vor der navbar
                this.interval = setInterval(updateGameArea, 20); //ruft updateGameArea jede 20ste Millisekunde auf (50 mal pro Sekunde)

                window.addEventListener("keydown" , function (e) { //Für Tastatur-Movement
                    myGameArea.key = e.keyCode;
                })
                window.addEventListener("keyup" ,  function(e) {
                    myGameArea.key = false;
                })
               /* window.addEventListener("mousemove" , function(e){ //Für Maus-Movement (Beta)
                    myGameArea.x = e.pageX;
                    myGameArea.y = e.pageY;
                })
                */



            },
            clear : function(){
                this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
            }

        }
        function komponente(width, height, color, x, y, type) //Funktion zur Erstellung der Komponenten
        {
            this.type = type;
            if(type == "image")
            {
                this.image = new Image();
                this.image.src = color; //url des Bildes eingeben statt "color"
            }
            this.width = width;
            this.height = height;
            this.speedX = 0;
            this.speedY = 0;
            this.x = x;
            this.y = y;

            this.update = function() //update funktion für die Komponenten
            {
                ctx = myGameArea.context;
                if (type == "image") {
                    ctx.drawImage(this.image, this.x, this.y, this.width, this.height)
                } else {
                    ctx.fillStyle = color;
                    ctx.fillRect(this.x, this.y, this.height, this.width);
                }
            }

            this.newPos = function() //neue Position des Objekts basierend auf speed
            {
                this.x += this.speedX;
                this.y += this.speedY;
            }
        }
        function updateGameArea() //clear und update gegen Objekt-Trail beim bewegen +
        {
            myGameArea.clear();
            /*if (myGameArea.x && myGameArea.y) { //für Maus-Movement (Beta)
                balken1.x = myGameArea.x;
                balken1.y = myGameArea.y;
            } */
            balken1.speedX = 0; //für Tastatur Movement
            balken1.speedY = 0;
            if (myGameArea.key == 37) {balken1.speedX = -1; }
            if (myGameArea.key == 39) {balken1.speedX = 1; }
            if (myGameArea.key == 38) {balken1.speedY = -1; }
            if (myGameArea.key == 40) {balken1.speedY = 1; }
            balken1.newPos();
            balken1.update();

        }
    </script>

<p style="text-align: center">Bewege den Balken mit der Maus</p>

</body>
</html>